{"remainingRequest":"C:\\Users\\maxla\\Documents\\GitHub\\Projet-VueJS-Norman-Marias\\projetbuffa_modele_cli_router\\Client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\maxla\\Documents\\GitHub\\Projet-VueJS-Norman-Marias\\projetbuffa_modele_cli_router\\Client\\src\\components\\Restaurants.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\maxla\\Documents\\GitHub\\Projet-VueJS-Norman-Marias\\projetbuffa_modele_cli_router\\Client\\src\\components\\Restaurants.vue","mtime":1578926268000},{"path":"C:\\Users\\maxla\\Documents\\GitHub\\Projet-VueJS-Norman-Marias\\projetbuffa_modele_cli_router\\Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\maxla\\Documents\\GitHub\\Projet-VueJS-Norman-Marias\\projetbuffa_modele_cli_router\\Client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\maxla\\Documents\\GitHub\\Projet-VueJS-Norman-Marias\\projetbuffa_modele_cli_router\\Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\maxla\\Documents\\GitHub\\Projet-VueJS-Norman-Marias\\projetbuffa_modele_cli_router\\Client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUmVzdGF1cmFudHMiLAogIHByb3BzOiB7fSwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIHJlc3RhdXJhbnRzOiBbXSwKICAgICAgbmJSZXN0YXVyYW50czogMCwKICAgICAgbm9tOiAiIiwKICAgICAgY3Vpc2luZTogIiIsCiAgICAgIHBhZ2U6IDAsCiAgICAgIHBhZ2VzaXplOiAxMCwKICAgICAgbm9tUmVjaGVyY2hlOiAiIiwKICAgICAgbmJQYWdlc0RlUmVzdWx0YXRzOiAwLAogICAgICBhcGlVUkw6ICJodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3Jlc3RhdXJhbnRzIiwKICAgICAgaWRfbW9kaWZ5OiAnJywKICAgICAgbm9tX21vZGlmeTogJycsCiAgICAgIGN1aXNpbmVfbW9kaWZ5OiAnJywKICAgICAgbW9kaWZ5Q2xpY2s6IGZhbHNlLAogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICBjb25zb2xlLmxvZygiQVZBTlQgQUZGSUNIQUdFICEiKTsKICAgIHRoaXMuZ2V0RGF0YUZyb21TZXJ2ZXIoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldERhdGFGcm9tU2VydmVyKCkgewogICAgICAvLyBpY2kgb24gZmFpdCB1biBmZXRjaCBwb3VyIHLDqWN1cMOpcmVyIGRlcwogICAgICAvLyByZXN0YXVyYW50cyBzdXIgbGUgc2VydmV1ci4KICAgICAgbGV0IHVybCA9CiAgICAgICAgdGhpcy5hcGlVUkwgKwogICAgICAgICI/cGFnZT0iICsKICAgICAgICB0aGlzLnBhZ2UgKwogICAgICAgICImcGFnZXNpemU9IiArCiAgICAgICAgdGhpcy5wYWdlc2l6ZSArCiAgICAgICAgIiZuYW1lPSIgKwogICAgICAgIHRoaXMubm9tUmVjaGVyY2hlOwoKICAgICAgZmV0Y2godXJsKQogICAgICAgIC50aGVuKHJlcG9uc2VKU09OID0+IHsKICAgICAgICAgIHJldHVybiByZXBvbnNlSlNPTi5qc29uKCk7CiAgICAgICAgfSkKICAgICAgICAudGhlbihyZXBvbnNlSlMgPT4gewogICAgICAgICAgLy8gaWNpIG9uIGEgbGEgcsOpcG9uc2Ugc291cyBsYSBmb3JtZQogICAgICAgICAgLy8gZCd1biBvYmpldCBKUwogICAgICAgICAgdGhpcy5yZXN0YXVyYW50cyA9IHJlcG9uc2VKUy5kYXRhOwogICAgICAgICAgdGhpcy5uYlJlc3RhdXJhbnRzID0gcmVwb25zZUpTLmNvdW50OwogICAgICAgICAgdGhpcy5uYlBhZ2VzRGVSZXN1bHRhdHMgPSBNYXRoLmZsb29yKAogICAgICAgICAgdGhpcy5uYlJlc3RhdXJhbnRzIC8gdGhpcy5wYWdlc2l6ZQogICAgICAgICAgKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBzdXBwcmltZXJSZXN0YXVyYW50KGlkKSB7CiAgICAgIC8vdGhpcy5yZXN0YXVyYW50cy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICBmZXRjaCgiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS9yZXN0YXVyYW50cy8iICsgaWQsCiAgICAgIHsKICAgICAgICAgIG1ldGhvZDoiREVMRVRFIgogICAgICB9KS50aGVuKChyZXBvbnNlSlNPTiA9PiB7CiAgICAgICAgICByZXR1cm4gcmVwb25zZUpTT04uanNvbigpOwogICAgICB9KSkudGhlbihyZXBvbnNlSlMgPT4gewogICAgICAgICAgdGhpcy5nZXREYXRhRnJvbVNlcnZlcigpOwogICAgICAgICAgY29uc29sZS5sb2cocmVwb25zZUpTKTsKICAgICAgfSkKICAgIH0sCiAgICBham91dGVyUmVzdGF1cmFudChldmVudCkgewogICAgICAvLyBldml0ZXIgbGUgY29tcG9ydGVtZW50IHBhciBkZWZhdXQKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgIHRoaXMucmVzdGF1cmFudHMucHVzaCh7CiAgICAgICAgbm9tOiB0aGlzLm5vbSwKICAgICAgICBjdWlzaW5lOiB0aGlzLmN1aXNpbmUKICAgICAgfSk7CiAgICAgIHRoaXMubm9tID0gIiI7CiAgICAgIHRoaXMuY3Vpc2luZSA9ICIiOwogICAgfSwKICAgIG1vZGlmaWVyUmVzdGF1cmFudChldmVudCkgewogICAgICAvLyBldml0ZXIgbGUgY29tcG9ydGVtZW50IHBhciBkZWZhdXQKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgIGxldCBmb3JtID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm0uYXBwZW5kKCJpZCIsIHRoaXMuaWRfbW9kaWZ5KQogICAgICBmb3JtLmFwcGVuZCgibm9tIiwgdGhpcy5ub21fbW9kaWZ5KTsKICAgICAgZm9ybS5hcHBlbmQoImN1aXNpbmUiLCB0aGlzLmN1aXNpbmVfbW9kaWZ5KTsKCiAgICAgIGZldGNoKCJodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3Jlc3RhdXJhbnRzLyIgKyB0aGlzLmlkX21vZGlmeSwgewogICAgICAgICAgbWV0aG9kOiJQVVQiLAogICAgICAgICAgYm9keTpmb3JtCiAgICAgIH0pLnRoZW4oKHJlcG9uc2VKU09OID0+IHsKICAgICAgICAgIHJldHVybiByZXBvbnNlSlNPTi5qc29uKCk7CiAgICAgIH0pKS50aGVuKHJlcG9uc2VKUyA9PiB7CiAgICAgICAgICB0aGlzLmdldERhdGFGcm9tU2VydmVyKCk7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXBvbnNlSlMpOwoKICAgICAgfSkgICAgICAgICAgICAgICAgCgogICAgICB0aGlzLm1vZGlmeUNsaWNrID0gZmFsc2U7CiAgICB9LAogICAgZ2V0Q29sb3IoaW5kZXgpIHsKICAgICAgcmV0dXJuIGluZGV4ICUgMiA/ICJsaWdodEJsdWUiIDogInBpbmsiOwogICAgfSwKICAgIHBhZ2VTdWl2YW50ZSgpIHsKICAgICAgY29uc29sZS5sb2coIlBhZ2Ugc3VpdmFudGUiKTsKICAgICAgdGhpcy5wYWdlKys7CiAgICAgIHRoaXMuZ2V0RGF0YUZyb21TZXJ2ZXIoKTsKICAgIH0sCiAgICBwYWdlUHJlY2VkZW50ZSgpIHsKICAgICAgY29uc29sZS5sb2coIlBhZ2UgcHJlY2VkZW50ZSIpOwogICAgICB0aGlzLnBhZ2UtLTsKICAgICAgdGhpcy5nZXREYXRhRnJvbVNlcnZlcigpOwogICAgfSwKICAgIHNldE1vZGlmeVRydWUoaWQsbm9tLGN1aXNpbmUpewogICAgICAgIHRoaXMubW9kaWZ5Q2xpY2sgPSB0cnVlOwogICAgICAgIHRoaXMuaWRfbW9kaWZ5ID0gaWQ7CiAgICAgICAgdGhpcy5ub21fbW9kaWZ5ID0gbm9tOwogICAgICAgIHRoaXMuY3Vpc2luZV9tb2RpZnkgPSBjdWlzaW5lOwogICAgfSwKICB9Cn07Cg=="},{"version":3,"sources":["Restaurants.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Restaurants.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div>\n  <md-field>\n      <label>Rechercher par nom:</label>\n      <md-input type=\"text\" v-model=\"nomRecherche\" v-on:input=\"getDataFromServer()\" />\n  </md-field>\n  \n  <div class=\"md-layout md-gutter\">\n    <div class=\"md-layout-item\">\n      <p>\n      Nombre de restaurants par page :\n      <input\n      type=\"range\"\n      min=\"2\"\n      max=\"100\"\n      value=\"10\"\n      v-on:input=\"getDataFromServer()\"\n      v-model=\"pagesize\"\n      />\n      {{pagesize}}\n      </p>\n      <button v-on:click=\"pagePrecedente()\" v-bind:disabled=\"page==0\">Précédent</button>\n      <button v-on:click=\"pageSuivante()\" :disabled=\"page == nbPagesDeResultats\">Suivant</button>\n    </div>\n    \n    <div class=\"md-layout-item\">\n      <h1>Nombre de restaurants total: {{nbRestaurants}}</h1>\n    </div>\n\n  </div>\n\n  \n  \n \n  <H1>Liste des restaurants</H1>\n        <md-table v-model=\"restaurants\" md-sort=\"name\" md-sort-order=\"asc\" md-card md-fixed-header>\n            <md-table-toolbar>\n                <div class=\"md-toolbar-section-start\">\n                    <h1 class=\"md-title\">Nom cherche</h1>\n                </div>\n\n                <md-field md-clearable class=\"md-toolbar-section-end\">\n                    <md-input placeholder=\"Search by name...\" v-model=\"nomRecherche\" @input=\"getDataFromServer()\" />\n                </md-field>\n            </md-table-toolbar>\n\n            <md-table-empty-state\n        md-label=\"No users found\"\n        :md-description=\"`No user found for this '${nomRecherche}' query. Try a different search term or create a new user.`\">\n      </md-table-empty-state>\n\n            \n\n            <md-table-row slot=\"md-table-row\" slot-scope=\"{ item }\">\n                <md-table-cell md-label=\"Name\" md-sort-by=\"name\">{{ item.name }}</md-table-cell>\n                <md-table-cell md-label=\"Cuisine\" md-sort-by=\"cuisine\">{{ item.cuisine }}</md-table-cell>\n                <md-table-cell md-label=\"Details\"><md-button><router-link :to=\"'restaurant/'+item._id\">Details</router-link></md-button>\n                <md-button class=\"md-raised md-primary\" v-on:click=\"supprimerRestaurant(item._id)\">Supprimer</md-button>\n                <md-button class=\"md-raised md-primary\" v-on:click=\"setModifyTrue(item._id,item.name,item.cuisine)\">Modifier</md-button></md-table-cell>\n            </md-table-row>\n        </md-table>\n\n  <form v-on:submit=\"modifierRestaurant\" v-if=\"modifyClick\">\n      <br>\n      <br>\n      <div class=\"md-layout md-gutter\">\n        <div class=\"md-layout-item\">\n          <md-field>\n            <label>Id :</label>\n            <md-input type=\"text\" v-model=\"nomRecherche\" v-on:input=\"getDataFromServer()\" />\n          </md-field>\n        </div>\n        <div class=\"md-layout-item\">\n          <md-field>\n            <label>Nom :</label>\n            <md-input type=\"text\" v-model=\"nomRecherche\" v-on:input=\"getDataFromServer()\" />\n          </md-field>\n        </div>\n        <div class=\"md-layout-item\">\n          <md-field>\n            <label>Cuisine :</label>\n            <md-input type=\"text\" v-model=\"nomRecherche\" v-on:input=\"getDataFromServer()\" />\n            </md-field>\n        </div>\n        <div class=\"md-layout-item\">\n            <md-button class=\"md-raised md-primary\">Modifier</md-button>\n        </div>\n      </div>\n  </form>\n</div>\n</template>\n\n<script>\nexport default {\n  name: \"Restaurants\",\n  props: {},\n  data: function() {\n    return {\n      restaurants: [],\n      nbRestaurants: 0,\n      nom: \"\",\n      cuisine: \"\",\n      page: 0,\n      pagesize: 10,\n      nomRecherche: \"\",\n      nbPagesDeResultats: 0,\n      apiURL: \"http://localhost:8080/api/restaurants\",\n      id_modify: '',\n      nom_modify: '',\n      cuisine_modify: '',\n      modifyClick: false,\n    };\n  },\n  mounted() {\n    console.log(\"AVANT AFFICHAGE !\");\n    this.getDataFromServer();\n  },\n  methods: {\n    getDataFromServer() {\n      // ici on fait un fetch pour récupérer des\n      // restaurants sur le serveur.\n      let url =\n        this.apiURL +\n        \"?page=\" +\n        this.page +\n        \"&pagesize=\" +\n        this.pagesize +\n        \"&name=\" +\n        this.nomRecherche;\n\n      fetch(url)\n        .then(reponseJSON => {\n          return reponseJSON.json();\n        })\n        .then(reponseJS => {\n          // ici on a la réponse sous la forme\n          // d'un objet JS\n          this.restaurants = reponseJS.data;\n          this.nbRestaurants = reponseJS.count;\n          this.nbPagesDeResultats = Math.floor(\n          this.nbRestaurants / this.pagesize\n          );\n        });\n    },\n    supprimerRestaurant(id) {\n      //this.restaurants.splice(index, 1);\n      fetch(\"http://localhost:8080/api/restaurants/\" + id,\n      {\n          method:\"DELETE\"\n      }).then((reponseJSON => {\n          return reponseJSON.json();\n      })).then(reponseJS => {\n          this.getDataFromServer();\n          console.log(reponseJS);\n      })\n    },\n    ajouterRestaurant(event) {\n      // eviter le comportement par defaut\n      event.preventDefault();\n\n      this.restaurants.push({\n        nom: this.nom,\n        cuisine: this.cuisine\n      });\n      this.nom = \"\";\n      this.cuisine = \"\";\n    },\n    modifierRestaurant(event) {\n      // eviter le comportement par defaut\n      event.preventDefault();\n\n      let form = new FormData();\n      form.append(\"id\", this.id_modify)\n      form.append(\"nom\", this.nom_modify);\n      form.append(\"cuisine\", this.cuisine_modify);\n\n      fetch(\"http://localhost:8080/api/restaurants/\" + this.id_modify, {\n          method:\"PUT\",\n          body:form\n      }).then((reponseJSON => {\n          return reponseJSON.json();\n      })).then(reponseJS => {\n          this.getDataFromServer();\n          console.log(reponseJS);\n\n      })                \n\n      this.modifyClick = false;\n    },\n    getColor(index) {\n      return index % 2 ? \"lightBlue\" : \"pink\";\n    },\n    pageSuivante() {\n      console.log(\"Page suivante\");\n      this.page++;\n      this.getDataFromServer();\n    },\n    pagePrecedente() {\n      console.log(\"Page precedente\");\n      this.page--;\n      this.getDataFromServer();\n    },\n    setModifyTrue(id,nom,cuisine){\n        this.modifyClick = true;\n        this.id_modify = id;\n        this.nom_modify = nom;\n        this.cuisine_modify = cuisine;\n    },\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n\n</style>\n"]}]}